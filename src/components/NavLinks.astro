---
const LINKS = [
  { href: '/', name: 'Home' },
  { href: '/about', name: 'About' },
  { href: '/blog', name: 'Blog' },
]

const { pathname } = Astro.url
---

<ul class='flex gap-1 nav-links'>
  {
    LINKS.map(link => {
      return (
        <li class='px-1 py-1 flex-1 text-center'>
          <a
            data-link={link.href}
            href={link.href}
            class:list={[
              {
                'text-blue-500': pathname === link.href,
              },
              'hover:text-blue-500',
            ]}
          >
            <span>{link.name}</span>
          </a>
        </li>
      )
    })
  }
</ul>

<script type='module'>
  document.addEventListener('astro:page-load', () => {
    const links = document.querySelectorAll('a[data-link]')

    links.forEach(link => {
      link.addEventListener('click', event => {
        const href = link.dataset.link

        if (href === globalThis.location.pathname) {
          event.preventDefault()
        }
      })
    })
  })
</script>

<style>
  .nav-links {
    width: 100%;
    top: 5rem;
    left: 48px;
    background-color: #ff9776;
    display: none;
    margin: 0;
  }

  .nav-links a {
    text-align: center;
    padding: 10px 0;
    text-decoration: none;
    font-size: 1.2rem;
    font-weight: bold;
    text-transform: capitalize;
  }

  .nav-links a:hover,
  .nav-links a:focus {
    background-color: #ff9776;
  }

  .expanded {
    display: unset;
  }

  @media screen and (min-width: 636px) {
    .nav-links {
      margin-left: 5em;
      display: block;
      width: auto;
      background: none;
    }

    .nav-links a {
      display: inline-block;
      padding: 15px 20px;
    }
  }
</style>
